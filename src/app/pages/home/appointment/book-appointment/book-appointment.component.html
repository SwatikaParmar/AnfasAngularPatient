<div class="dashboard-outer">
  <section>
    <div class="content-body">
      <div class="container-fluid">
        <div class="flex mb-2 items-center ml-1">
          <!-- Back Arrow Button -->
          <button class="back-btn-left-circle flex items-center justify-center w-7 h-7 rounded-full mr-3 mb-2 text-white"
             (click)="backClicked()">
          <i class="fas fa-arrow-left" style="font-size: 13px; text-align: center; color: black;"></i>

          </button>
        </div>
        <div class="bg-gray-50 text-gray-800 font-sans" style="border-radius: 15px;">
          <div class="max-w-5xl mx-auto p-4">
            <div class="text-center">
              <div class="text-lg font-semibold mt-2">{{ receiverName || 'Unknown Receiver' }}</div>
              <div class="text-sm text-gray-500 mb-2">-{{ 'PHYSICIANS_DEPARTMENT' | translate }}</div>
            </div>
          </div>
        </div>
        <h1 class="text-lg font-semibold mt-3 mb-3 ml-3" style="font-size: 20px; color: #726641;">
          {{ 'APPOINTMENTS_SCHEDULE' | translate }}</h1>
      <div class="flex items-start justify-start gap-6 p-[0px] sm:p-4 bg-gray-50 text-gray-800 font-sans" style="border-radius: 15px;">

          <!-- Calendar Section -->
          <div class="d-flex gap-2" style="width: 100%; background-color: #f8f9fa;">
            <!-- Calendar Section - 50% -->
            <div
              style="width: 50%; background-color: white; padding: 1rem; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); border-radius: 12px;">
              <mat-calendar #calendar [dateClass]="dateClass" (selectedChange)="onSelect($event)">
              </mat-calendar>

            </div>

            <!-- Button Section - 50% -->
            <div
              style="width: 50%; background-color: white; padding: 1rem; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); border-radius: 12px;">

              <div class="d-flex justify-content-center  h-100">
                <div>
                  <!-- book-appointment.component.html -->

                  <!-- Morning / Evening toggle buttons -->
                  <div class="d-flex justify-content-center align-items-center">
                    <button class="pt-2 pb-2 rounded-l-full"
                      [ngClass]="selectedTime === 'morning' ? 'text-white' : 'bg-white text-gray-700'"
                      [ngStyle]="selectedTime === 'morning' ? {'background-color': '#FEC34F'} : {}"
                      style="width: 120px;" (click)="selectTime('morning')">
                      {{ 'MORNING' | translate }}
                    </button>
                    <button class="pt-2 pb-2 rounded-r-full"
                      [ngClass]="selectedTime === 'evening' ? 'text-white' : 'bg-white text-gray-700'"
                      [ngStyle]="selectedTime === 'evening' ? {'background-color': '#FEC34F'} : {}"
                      style="width: 120px;" (click)="selectTime('evening')">
                      {{ 'EVENING' | translate }}
                    </button>
                  </div>

                  <!-- Selected Date Display -->
                  <div class="mt-3 text-center font-bold text-lg text-gray-700" *ngIf="selectedDate">
                    {{ 'DATE' | translate }}: {{ selectedDate | date: 'yyyy-MM-dd' }}
                  </div>

                  <!-- Display filtered time slots -->
                  <div class="mt-4 row">
                    <ng-container *ngIf="filteredSlots.length > 0; else noSlots">
                      <div *ngFor="let slot of filteredSlots; let i = index" class="col-6">
                        <div
                          class="border p-2 rounded mb-2"
                          [ngStyle]="{
                            backgroundColor: selectedSlot === slot ? '#E1C377' : '',
                            color: selectedSlot === slot ? 'white' : ''
                          }"
                          (click)="selectSlot(slot)"
                          style="cursor: pointer;"
                        >
                          {{ slot.startTime }} - {{ slot.endTime }}
                        </div>
                      </div>
                      
                    </ng-container>

                    <ng-template #noSlots>
                      <div class="text-gray-500 mt-2 col-12">{{ 'NO' | translate }} {{ selectedTime }} {{
                        'SLOTS_AVAILABLE' | translate }}</div>
                    </ng-template>
                  </div>


                </div>
              </div>
            </div>
          </div>


        </div>

        
        <!-- <div class=" bg-white h-20 border border-gray-200 rounded mb-4 mt-4"></div> -->
        <div class="mb-4 text-center mt-3">
          <a (click)="navigateToPreview()" class="text-blue-600 underline">{{ 'REVIEW_YOUR_CONSENT_FORM' | translate
            }}</a>
        </div>
        <div class="flex justify-center">
          <button (click)="bookSelectedAppointment()" class="btn btn-custom text-white py-2 rounded-full"
            style="width: 30%; background-color: #A68C4D ; ">
            {{ 'BOOK_AN_APPOINTMENT' | translate }}
          </button>
        </div>

      </div>
    </div>
  </section>
</div>