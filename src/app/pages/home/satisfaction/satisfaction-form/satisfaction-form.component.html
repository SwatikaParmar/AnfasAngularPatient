<div class="dashboard-outer">
  <section>
    <div class="content-body">
      <div class="container-fluid">
        <!-- Back Button and Title -->
        <div class="flex mb-2 items-center ml-1">
          <button class="flex items-center justify-center w-7 h-7 rounded-full mr-3 mb-2 text-black"
                  style="background-color: #FCC34F; color:black;"
                  (click)="backClicked()">
            <i class="fas fa-arrow-left" style="font-size: 13px;"></i>
          </button>
          <h1 class="text-lg font-semibold" style="font-size: 25px; color: #726641;">
            PATIENT SATISFACTION FORM
          </h1>
        </div>

        <div class="container anfasi-section">
          <!-- Banner -->
          <div class="anfasi-banner">
            Kingdom of Saudi Arabia – Anfas Medical Care
          </div>

          <!-- Logo -->
          <div class="anfasi-logo">
            <img src="assets/images/anfas-logo 12.png" alt="Anfas Logo">
            <div class="anfasi-text-ar">أنفاس</div>
            <div class="anfasi-text-en">ANFAS</div>
          </div>

          <!-- Survey Section -->
          <div class="survey-section">
            <h6>{{ data?.satisfactionLabel?.form?.title }}</h6>
            <p>{{ data?.satisfactionLabel?.form?.intro }}</p>
          </div>

          <!-- Guest Form -->
          <div class="form-section">
            <h4> {{ data?.satisfactionLabel?.form?.subtitle }}</h4>
            <form [formGroup]="form">
              <div class="row">
                <!-- Filled By -->
                <div class="col-12 mb-3">
                  <label class="form-label">{{ data?.satisfactionLabel?.fields?.filledBy }}</label>
                  <div class="d-flex gap-2">
                    <div *ngFor="let option of filledByOptions" class="form-check me-2">
                      <input class="form-check-input" type="radio" [formControlName]="'filledBy'" [value]="option.code" [id]="option.code">
                      <label class="form-check-label" [for]="option.code">{{ option.label }}</label>
                    </div>
                  </div>
                </div>

                <!-- Guest Info -->
                <div class="col-md-4 col-12 mb-3">
                  <label class="form-label">{{ data?.satisfactionLabel?.fields?.name }}:</label>
                  <input type="text" class="form-control" formControlName="name" readonly>
                </div>
                <div class="col-md-4 col-12 mb-3">
                  <label class="form-label">{{ data?.satisfactionLabel?.fields?.mrn }}:</label>
                  <input type="text" class="form-control" formControlName="mrn" readonly>
                </div>
                <div class="col-md-4 col-12 mb-3">
                  <label class="form-label">{{ data?.satisfactionLabel?.fields?.mobileNumber }}:</label>
                  <input type="tel" class="form-control" formControlName="mobileNumber" readonly>
                </div>

                <!-- Age -->
                <div class="col-md-4 col-12 mb-3">
                  <label class="form-label">{{ data?.satisfactionLabel?.fields?.ageBracket }}:</label>
                  <select class="form-select" formControlName="ageBracket">
                    <option *ngFor="let age of ageOptions" [value]="age.code">{{ age.label }}</option>
                  </select>
                </div>

                <!-- Gender -->
                <div class="col-md-3 col-12 mb-3">
                  <label class="form-label">{{ data?.satisfactionLabel?.fields?.gender }}:</label>
                  <div class="d-flex gap-2">
                    <div *ngFor="let g of genderOptions" class="form-check me-2">
                      <input class="form-check-input" type="radio" [formControlName]="'gender'" [value]="g.code" [id]="g.code">
                      <label class="form-check-label" [for]="g.code">{{ g.label }}</label>
                    </div>
                  </div>
                </div>

                <!-- Residence -->
                <div class="col-md-5 col-12 mb-3">
                  <label class="form-label">{{ data?.satisfactionLabel?.fields?.residence }}:</label>
                  <div class="d-flex gap-2">
                    <div *ngFor="let r of residenceOptions" class="form-check me-2">
                      <input class="form-check-input" type="radio" [formControlName]="'residence'" [value]="r.code" [id]="r.code">
                      <label class="form-check-label" [for]="r.code">{{ r.label }}</label>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>

          <!-- Ratings Table -->
          <div class="table-responsive mt-4">
          <table class="feedback-table" [formGroup]="form">
  <thead>
    <tr>
      <th>No.</th>
      <th>Question</th>
      <th *ngFor="let s of ratingScale">{{ s.label }}</th>
    </tr>
  </thead>
  <tbody formGroupName="ratings">
    <tr *ngFor="let q of ratingsTable; let i = index">
      <td>{{ i + 1 }}</td>
      <td>{{ q.label }}</td>
      <td *ngFor="let s of ratingScale">
        <input type="radio" [formControlName]="q.key" [value]="s.code">
      </td>
    </tr>
  </tbody>
</table>

          </div>

<div class="mt-4" [formGroup]="commentsFG">
  <p>{{ getCommentLabel('C1') }}</p>
  <textarea class="form-control" formControlName="C1" rows="3"></textarea>

  <p class="mt-3">{{ getCommentLabel('C2') }}</p>
  <textarea class="form-control" formControlName="C2" rows="3"></textarea>
</div>




          <div class="mt-4">
            <button class="btn btn-primary btn-sm" type="button" (click)="exportJSON()">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
